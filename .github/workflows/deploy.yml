# 工作流名称
name: Deploy to GitHub Pages

# 触发条件：当 'main' 分支有 push 操作时
on:
  push:
    branches:
      - main 

# 任务
jobs:
  deploy:
    # 运行在最新的 ubuntu 系统上
    runs-on: ubuntu-latest

    # 步骤
    steps:
      # 1. 把你的 'main' 分支代码拉取到虚拟机
      - uses: actions/checkout@v4

      # 2. 设置 Python 环境
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: 3.x

      # 3. 安装 MkDocs 和我们需要的插件
      # (注意：这里的插件列表需要和你 mkdocs.yml 中用的匹配)
      - name: Install dependencies
        run: |
          pip install mkdocs-material mdx_wikilink_plus pymdown-extensions

      # 4. 最关键的一步：
      # 运行 mkdocs gh-deploy 命令
      # 它会自动：
      # (a) 构建 HTML 文件
      # (b) 将 HTML 文件推送到 'gh-pages' 分支
      - name: Deploy
        run: mkdocs gh-deploy --force
